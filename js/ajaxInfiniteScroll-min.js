!function(a){a.fn.ajaxInfiniteScroll=function(t,r){t=a.extend({target:"resultatsAjax.php",limit:10,nbResult:"",duration:500,classLast:".results",loadMore:"#loadMore",attrID:"id",evt:"scroll"},t),loader=this;var e=!1;return loader.bind(t.evt,function(){var s=parseInt(a(t.classLast+":last").attr(t.attrID)),n=Math.ceil((s+1)/parseInt(t.limit));if(s<=parseInt(t.limit))var l=parseInt(s),n=n+1;else var l=parseInt(t.limit);if(params={page:n,nb:s,limit:l},r=a.extend(r,params),params.nb>=params.limit&&a(t.loadMore).show(),a(t.loadMore).show(),""==parseInt(t.nbResult)||0==parseInt(t.nbResult)){var o=params.limit*params.page;parseInt(a(t.classLast+":last").attr(t.attrID))>=parseInt(t.nbResult)&&(a(t.loadMore).remove(),loader.unbind(t.evt),e=!0)}else{var o=parseInt(t.nbResult);parseInt(a(t.classLast+":last").attr(t.attrID))>=parseInt(t.nbResult)&&(a(t.loadMore).remove(),loader.unbind(t.evt),e=!0)}var i=parseInt(a(t.classLast+":last").offset().top);i-a(window).height()<=a(window).scrollTop()&&e===!1&&params.nb>=params.limit&&params.nb<=o&&(e=!0,a.ajax({url:t.target+"?"+r.queryNameAS,data:r,success:function(r){a(t.loadMore).fadeOut(t.duration),setTimeout(function(){a(t.classLast+":last").after(r)},t.duration),e=!1},error:function(a,t){alert(r.queryNameAS),console.log("Error: "+t)}}))}),this}}(jQuery);