(function(e){e.fn.ajaxInfiniteScroll=function(t,n){t=e.extend({target:"resultatsAjax.php",limit:10,nbResult:"",duration:500,classLast:".results",loadMore:"#loadMore",attrID:"id",evt:"scroll"},t);loader=this;loader.bind(t.evt,function(r){var i=parseInt(e(t.classLast+":last").attr(t.attrID));var s=Math.ceil((i+1)/parseInt(t.limit));if(i<=parseInt(t.limit)){var o=parseInt(i);var s=s+1}else{var o=parseInt(t.limit)}params={page:s,nb:i,limit:o};n=e.extend(n,params);if(params.nb>=params.limit){e(t.loadMore).show()}e(t.loadMore).show();if(parseInt(t.nbResult)==""||parseInt(t.nbResult)==0){var u=params.limit*params.page;if(parseInt(e(t.classLast+":last").attr(t.attrID))>=parseInt(t.nbResult)){e(t.loadMore).remove();loader.unbind(t.evt)}}else{var u=parseInt(t.nbResult);if(parseInt(e(t.classLast+":last").attr(t.attrID))>=parseInt(t.nbResult)){e(t.loadMore).remove();loader.unbind(t.evt)}}if(e(window).scrollTop()==e(document).height()-e(window).height()&&params.nb>=params.limit&&params.nb<=u){e.ajax({url:t.target+"?"+n.queryNameAS,data:n,success:function(n){e(t.loadMore).fadeOut(t.duration);setTimeout(function(){e(t.classLast+":last").after(n)},t.duration)},error:function(e,t){console.log("Error: "+t)}})}});return this}})(jQuery)